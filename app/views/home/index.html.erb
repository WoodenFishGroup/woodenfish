<style>
  a.starred:link {color:#DAA520;}    /* unvisited link */
  a.starred:visited {color:#DAA520;} /* visited link */
  a.starred:hover {color:#dddddd;}   /* mouse over link */
  a.starred:active {color:#DAA520;}  /* selected link */
  a.unstarred:link {color:#dddddd;}    /* unvisited link */
  a.unstarred:visited {color:#dddddd;} /* visited link */
  a.unstarred:hover {color:#DAA520;}   /* mouse over link */
  a.unstarred:active {color:#dddddd;}  /* selected link */
  .poststar {
    font-size:30px;
  }
  .list-group-item {
    border-radius: 8px;
    border-radius: 8px;
  }
  .list-group-item:first-child {
    border-radius: 8px;
    border-radius: 8px;
  }
  .list-group-item:last-child {
    border-radius: 8px;
    border-radius: 8px;
  }
</style>

<div>
  <ul class="list-group" style="background-color:#dddddd">
    <% @posts.each do |post| %> 
      <li class="list-group-item" style="padding:20px;margin-bottom:20px">
        <div class="media">
          <div style="float:left;width:60px;margin-right:10px;text-align:center">
            <div id="post-star-<%= post.id %>">
              <%= render :partial => 'home/star', :locals => {:post => post} %>
            </div>
          </div>
          <div class="media-body">
            <div id="post-body-<%= post.id %>">
              <%= render :partial => 'home/post', :locals => {:post => post, :mode => "view"} %>
            </div>
            <div id="post-comment-section-<%= post.id %>">
              <div id="post-comment-<%= post.id %>">
                  <% comment_count = post.comments_count %>
                  <% if comment_count > 0 %>
                    <%= link_to "#{comment_count} comment#{"s" if comment_count > 1}", 
                          post_comments_path(post.id),
                          :method => :get, :remote => true %>
                  <% end %>
              </div>
              <div style="margin-right:60px;margin-top:10px">
                <script>
                  $(function(){
                    $('#comment-form-<%= post.id %>').bind('ajax:success', function(xhr, data, status){
                      $('#comment-body-<%= post.id %>').val("")
                      $.get('<%= post_comments_path(post.id) %>')
                    });
                  });
                </script>
                <%= form_tag "comments", :id => "comment-form-#{post.id}",
                    :remote => true, :method => "POST" do %>
                  <input type="hidden" name="post_id" value="<%= post.id %>" />
                  <%= text_field_tag :comment_body, "", :id => "comment-body-#{post.id}",
                      :placeholder => "comment here...",
                      :style => "height:30px;width:100%;padding:5px;border:1px solid #dddddd" %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </li>
    <% end %>
  </ul>
</div>

<div>
  <div class="pagination pagination-right" style="vertical-align: middle;">                                      
    <% cond = {} %>                                                                                              
    <%= will_paginate @posts, :params => cond, :renderer => BootstrapPagination::Rails %>                    
  </div>                                                                                                         
</div>
